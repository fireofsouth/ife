<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>java script task 15</title>
</head>
<body>
	 <ul id="source">
    <li>北京空气质量：<b>90</b></li>
    <li>上海空气质量：<b>70</b></li>
    <li>天津空气质量：<b>80</b></li>
    <li>广州空气质量：<b>50</b></li>
    <li>深圳空气质量：<b>40</b></li>
    <li>福州空气质量：<b>32</b></li>
    <li>成都空气质量：<b>90</b></li>
  </ul>

  <ul id="resort">

  </ul>
  <button id="sort-btn">排序</button>
    <script>
     var $=function(id){
     	return document.getElementById(id);
     }

      function getData(){
       var data=[];
       var ul=$('source');
       var li=ul.getElementsByTagName('li');
       for(var i=0;i<li.length;i++)
       {  
       	  var d=[];
       	  var city=li[i].innerHTML.match(/(.*?)空气/)[1]; 
       	  var num=li[i].getElementsByTagName('b')[0].innerHTML;
          d.push(city);
          d.push(num);
          data.push(d);
       	   
       }
      

       return data;
      }

   function sortAqiData(data){
     
      data.sort(function(a,b){
      	return b[1]-a[1];
      })
     return data;
   }
   function render(data){
   	var array=['一','二','三','四','五','六','七'];
    // var ul =$('resort');
    // ul.innerHTML="";
    // data.forEach(function(item,index){
    // 	var li=document.createElement('li');
    // 	li.innerHTML='第'+array[index]+'名:'+item[0]+'空气质量:'+'<b>'+item[1]+'</b>';
    // 	ul.appendChild(li);
    // })  
  var ul=$('resort');
  var list=[];
  data.forEach(function(item,index){
      
      var text='<li>第'+array[index]+'名:'+item[0]+'空气质量:'+'<b>'+item[1]+'</b></li>';
      list.push(text);
  })
  ul.innerHTML=list.join('');
   
   }
   function btnHandle() {
  var aqiData = getData()
  aqiData = sortAqiData(aqiData);
  render(aqiData);
}

function init() {

   $('sort-btn').onclick=btnHandle;
  // 在这下面给sort-btn绑定一个点击事件，点击时触发btnHandle函数

}
init();
    </script>
</body>
</html>